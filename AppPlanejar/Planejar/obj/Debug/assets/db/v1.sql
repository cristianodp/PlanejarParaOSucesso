CREATE TABLE TUSUARIOS
(	ID     INTEGER             NOT NULL PRIMARY KEY AUTOINCREMENT,
	NOME   [NOME VARCHAR] (70) NOT NULL,
	EMAIL  VARCHAR (100)       NOT NULL,
	SENHA  VARCHAR (70)        NOT NULL,
	ATIVO  INTEGER             NOT NULL
	DEFAULT 1,
	LOGADO INTEGER             NOT NULL
	DEFAULT 0
);
/
CREATE TABLE TCATEGORIAS 
(	ID        INTEGER      NOT NULL PRIMARY KEY AUTOINCREMENT,
	DESCRICAO VARCHAR (70) NOT NULL,
	TIPO      VARCHAR (1)  NOT NULL,
	COR       INTEGER      NOT NULL,
	USU_ID    INTEGER      NOT NULL REFERENCES TUSUARIOS (ID) ON DELETE CASCADE,
	VISIVEL   INTEGER      NOT NULL DEFAULT 1,
	ATIVO     INTEGER      NOT NULL DEFAULT 1
);
/
CREATE TABLE TITENS (
    ID        INTEGER      NOT NULL PRIMARY KEY AUTOINCREMENT,
    DESCRICAO VARCHAR (70) NOT NULL,
    TIPO      VARCHAR (1)  NOT NULL,
    TP_CTA    VARCHAR (1),
    COR       INTEGER,
    CAT_ID    INTEGER      REFERENCES TCATEGORIAS (ID) ON DELETE CASCADE,
    USU_ID    INTEGER      NOT NULL REFERENCES TUSUARIOS (ID) ON DELETE CASCADE,
    ATIVO     INTEGER      NOT NULL DEFAULT 1
);
/
CREATE TABLE TMETAS (
    ID        INTEGER         NOT NULL PRIMARY KEY AUTOINCREMENT,
    DT_INICIO DATE            NOT NULL,
    DT_FINAL  DATE            NOT NULL,
    VALOR     DECIMAL (17, 8) NOT NULL,
    CAT_ID    INTEGER         NOT NULL REFERENCES TCATEGORIAS (ID) ON DELETE CASCADE,
    ATIVO     INTEGER         NOT NULL DEFAULT 1
);
/
CREATE TABLE TLANCAMENTOS (
    ID        INTEGER         NOT NULL PRIMARY KEY AUTOINCREMENT,
    DT_CAD    DATE            NOT NULL,
    TIPO      VARCHAR (1)     NOT NULL,
    NUMERO    INTEGER         NOT NULL,
    PARCELAS  INTEGER         NOT NULL,
    DT_VCTO   DATE            NOT NULL,
    DT_PGTO   DATE,
    VALOR     DECIMAL (17, 8) NOT NULL,
    VLR_PGTO  DECIMAL (17, 8),
    LANC_ID   INTEGER         NOT NULL REFERENCES TLANCAMENTOS (ID) ON DELETE CASCADE,
    USU_ID    INTEGER         NOT NULL REFERENCES TUSUARIOS (ID) ON DELETE CASCADE,
    ITEM_ID   INTEGER         NOT NULL REFERENCES TITENS (ID) ON DELETE CASCADE,
    ITDEBT_ID INTEGER         NOT NULL REFERENCES TITENS (ID) ON DELETE CASCADE
);
/
